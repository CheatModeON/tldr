<html>
   <head>
     <meta charset="utf-8">
     <meta name="viewport" content="width=device-width, initial-scale=1">
     <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.0.0/p5.js"></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.0.0/addons/p5.sound.js"></script>
     <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>
   <style>
    body {
        text-align: center;
    }
    div {
        text-align: center;
    }
   </style>
   </head>
   <body>
     {% extends "base.html" %}

     {% block app_content %}

     {% if original %}
      <h1> AI GENERATED SUMMARY </h1>
      <div id="text">
          <p>{{res}}</p>
      </div>

      <h1> ORIGINAL TEXT </h1>
      <div id="text">
         <p>{{original}}</p>
      </div>

      {% else %}
       ERROR - INVALID TOKEN
      {% endif %}

     {% endblock %}

      <script>
        $(document).ready(function() {
          var txt='{{res}}';
          if(txt=='processing...') {
            setTimeout(function(){ location.reload(); }, 5000);
          }
          if (window.SpeechSynthesisUtterance === undefined) {
              // Not supported
            } else {
              if(txt!='processing...'){
                  var utterance = new SpeechSynthesisUtterance('{{res}}');
                  window.speechSynthesis.speak(utterance);
              }
            }
        });
      </script>

      <!--script>
          let amp;
          function setup() {
              createCanvas(200,200);
              amp = new p5.Amplitude();
          }
          function draw() {
              background(0);
              var vol = amp.getLevel();
              ellipse(100,100,200,vol*200);
          }
      </script-->
   </body>
</html>
